<html>
<head>
  <script src="js/jquery-1.4.4.min.js"></script>
  <script src="js/jquery-ui-1.8.9.custom.min.js"></script>
  <link href="css/ui-lightness/jquery-ui-1.8.9.custom.css" rel="stylesheet" type="text/css"></link>
  <link href="css/dragable_flour_n_water.css" rel="stylesheet" type="text/css"></link>
    <script type="text/javascript" src="js/calculator.js"></script>
</head>
<body>
	<script>
	function setStarterHydration(){
	  var percentWidth = parseInt(($('#hydration').width() / $('#starter').width())*100)
    $('#hydration').find('.quality').text(percentWidth);
    calculator.resetHydration();
	}
	
	baseTwitterIframeSRC = "http://platform0.twitter.com/widgets/tweet_button.html?_=1298156795174&count=vertical&lang=en&url=http%3A%2F%2Fjoshuacronemeyer.github.com%2FFlour-and-Water%2F&via=MakingLoaf"
	function setTweetText(){
	  var hydration = $("#result").text();
	  var tweetText = "My sourdough is " + hydration + "% hydration exactly! I calculated it.";
	  var encodedTweetText = "&text=" + encodeURIComponent(tweetText);
	  $("iframe").attr("src", baseTwitterIframeSRC + encodedTweetText);
	}
	
	$(function() {
		$( "#flour" ).resizable({
		  maxHeight: 80,
		  minHeight: 80,
		  resize: function(event, ui) { 
		    $(this).find('.quantity').text($(this).width());
		    calculator.resetHydration();
		  },
		  stop: setTweetText
		});
		
    $( "#water" ).resizable({
      maxHeight: 80,
      minHeight: 80,
      resize: function(event, ui) { 
        $(this).find('.quantity').text($(this).width());
        calculator.resetHydration();
      },
  		stop: setTweetText
    });
    
    $( "#starter" ).resizable({
      maxHeight: 80,
      minHeight: 80,
      alsoResize: "#hydration",
      resize: function(event, ui) { 
        $(this).find('.quantity').text($(this).width());
        setStarterHydration();
        calculator.resetHydration();
      },
  		stop: setTweetText
    });
    	
		$( "#hydration" ).resizable({
		  maxHeight: 80,
		  minHeight: 80,
		  containment: "#starter",
		  resize: function(event, ui) {
		    setStarterHydration();
		  },
  		stop: setTweetText
		});
	});
	</script>
  <div class="outer_title">
    <div class="title center_stripe"><div class="result">Hydration = <span id="result">72</span>%</div></div>
  </div>
  <div class="outer_content">
    <div class="content center_stripe">
      <div id="calculator" class="demo">
        <div id="flour" class="resizable highlight-box" style="width: 500px">
          <p class="heading">Flour</p>
        	<span id="flour-size" class="quantity">500</span><span class="unit">g</span>
        </div>

        <div id="water" class="resizable highlight-box" style="width: 363px">
          <p class="heading">Water</p>
        	<span id="water-size" class="quantity">363</span><span class="unit">g</span>
        </div>

        <div id="starter" class="resizable highlight-box" style="width: 250px">
          <div id="hydration" class="sub_resizable sub_highlight_box" style="width: 183px">
            <p class="heading">Starter@Hydration</p>
          	<span id="starter-size" class="quantity">250</span><span class="unit">g</span><span id="starter-hydration" class="quality">72</span><span class="unit">%</span>
          </div>
        </div>  
      </div>
    </div>
  </div>
  <div class="outer_foot">
    <div class="foot center_stripe">
      <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://joshuacronemeyer.github.com/Flour-and-Water/" data-count="vertical" data-via="MakingLoaf">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    </div>
  </div>
</body>
</html>